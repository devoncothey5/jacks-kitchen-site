document.addEventListener("DOMContentLoaded",()=>{const e=document.documentElement,t=document.getElementById("menuBtn")||document.querySelector(".menu-btn");t&&(t.setAttribute("aria-expanded","false"),t.addEventListener("click",()=>{const n=e.classList.toggle("nav-open");t.setAttribute("aria-expanded",n?"true":"false")}));const n=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(e.target.classList.add("show"),e.target.classList.remove("hidden"),n.unobserve(e.target))})},{threshold:.1});document.querySelectorAll(".hidden").forEach(e=>n.observe(e));const o=document.createElement("div");o.id="lightbox",document.body.appendChild(o);const r=()=>{o.classList.remove("active"),o.innerHTML="",document.body.style.removeProperty("overflow")};o.addEventListener("click",e=>{e.target===o&&r()}),document.addEventListener("keydown",e=>{"Escape"===e.key&&o.classList.contains("active")&&r()}),document.addEventListener("click",e=>{const t=e.target.closest("ul.grid img,.gallery-grid img");if(!t)return;let n=t.getAttribute("data-full")||t.src;/\-400\.webp$/i.test(n)&&(n=n.replace(/-400\.webp$/i,"-800.webp"));const c=document.createElement("img");c.src=n,c.alt=t.alt||"",c.style.maxWidth="90%",c.style.maxHeight="90%",o.innerHTML="",o.appendChild(c),o.classList.add("active"),document.body.style.overflow="hidden"});const c=document.querySelector("header"),a=()=>c?c.getBoundingClientRect().height:0;document.addEventListener("click",t=>{const n=t.target.closest('a[href^="#"]');if(!n)return;const o=n.getAttribute("href").slice(1);if(!o)return;const r=document.getElementById(o);if(!r)return;t.preventDefault();const l=a(),s=r.getBoundingClientRect(),d=window.pageYOffset+s.top-l-8;window.scrollTo({top:Math.max(d,0),behavior:"smooth"}),e.classList.contains("nav-open")&&(e.classList.remove("nav-open"),t&&t.setAttribute("aria-expanded","false"))})});